## [프론트엔드 개발환경의 이해: NPM](https://jeonghwan-kim.github.io/series/2019/12/09/frontend-dev-env-npm.html)

### 프론트엔드 개발에 nodejs 가 필요한 이유

1. 최신 스펙으로 개발할 수 있다

   - JS 로 개발에 편리한 스펙이 나와도, 이걸 브라우저에 맞게 변환해주는 역할 (Babel, Webpack 등) 이 필요하다. 이런 도구들이 보통 nodejs 위에서 돌아가므로 nodejs 를 잘 아는 게 좋다

2. 빌드 자동화

   - 브라우저에 따라 폴리필을 추가할 뿐 아니라, 프로젝트에서 사용할 라이브러리를 다운로드하고, 테스트를 자동화하는 등의 역할

3. 개발환경 커스터마이징

&nbsp;

### Nodejs 설치

- Nodejs 공홈에 왼쪽은 안정적인 짝수버전, 오른쪽은 최신 기능을 지원하는 홀수버전이다

- 선택해 다운로드 하면 어떤 경로에 설치되었는지 나온다. $PATH 에 이 경로를 추가하는 것이 좋다

```
Node.js v13.7.0 to /usr/local/bin/node
npm v6.13.6 to /usr/local/bin/npm
```

- 터미널에 node 입력하면 node 터미널 도구가 실행된다. 코드를 입력하고 실행결과를 즉시 확인할 수 있는데, 이런 프로그램을 REPL (read-eval-print loop) 이라고 한다. 종료할 때는 `.exit` 을 입력한다

```
$ node
> 1 + 2
3
```

&nbsp;

### NPM

- 개발 프로젝트에는 외부 라이브러리를 다운로드 받고, 빌드하는 등 일련의 명령어를 자동화해 프로젝트를 관리하는 도구가 존재한다. 이러한 JS 기반 프로젝트의 빌드 도구가 `npm (node package manager)` 이다

- 터미널에서 npm 을 입력하면 사용할 수 있는 다양한 명령어를 확인할 수 있다

```
$ npm
Usage: npm <command>
```

&nbsp;

### 프로젝트 생성

- `npm init` 명령어를 사용해 프로젝트를 생성한다. package.json 파일이 생성되고, 여기에 프로젝트의 모든 정보가 기록된다

  - main: node 어플리케이션인 경우 진입점 경로. 프론트엔드 프로젝트인 경우 사용하지 않는다
  - scripts: 프로젝트 명령어를 등록할 수 있다

- 예시로 적혀있는 script test 명령어는 `"Error: no test specified"` 메세지를 출력하고, 에러코드 1을 던지며 종료하는 것이다

```
{
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  }
}
```

&nbsp;

- 커스텀으로 등록한 명령어는 run 을 추가해 실행한다. 프론트엔드 개발환경 구축을 위해 추가할 스크립트는 build, lint 정도가 있다

  - build: 소스 빌드
  - lint: 소스 컨벤션 검사

&nbsp;

### 외부 패키지 관리

- 앞서 npm init 을 통해 프로젝트를 생성했고, 프로젝트에서 사용할 패키지, 라이브러리의 설치방법을 알아보겠다

1. CDN 이용

   - CDN (콘텐츠 전송 네트워크) 에서 JS / CSS 라이브러리를 빠르게 제공해준다. html 에서 script 를 로드한다

2. 직접 다운로드

   - 소스 주소에서 코드를 다운로드 받아 프로젝트 폴더에 추가해 놓고 사용한다. 이를 개발자가 매번 수정, 다운로드, 빌드하면 ...

   - 버전에 따라 하위 호환성 여부 확인하고, 하위 호환되는 안전한 버전만 다운로드받아 업데이트 할 수 있다면? 자동화가 필요하다

3. NPM 이용

   - `npm install` 명령어로 외부 패키지를 프로젝트 폴더에 다운로드

   - 최신 버전의 xxx 를 [npm 저장소](https://www.npmjs.com/)에서 찾아 프로젝트에 다운로드한다. package.json 에 설치한 패키지 정보가 기록된다

&nbsp;

### NPM 버전관리

- 버전 번호를 관리하기 위한 규칙으로 유의적 버전을 사용한다. 유의적 버전은 주(Major), 부(Minor), 수(Patch) 로 버전을 관리한다

```
"react": "^16.12.0"
```

- - 주 버전 (Major Version): 기존 버전과 호환되지 않게 변경한 경우
  - 부 버전 (Minor Version): 기존 버전과 호환되면서 기능이 추가된 경우
  - 수 버전 (Patch Version): 기존 버전과 호환되면서 버그를 수정한 경우

&nbsp;

- 유의적 버전 명세 뿐 아니라 버전 범위에도 규칙을 가지고 관리한다. 주로 틸드(~), 캐럿(^) 으로 범위를 명시한다

  - 라이브러리 정식 릴리즈 전에도 패키지 버전이 수시로 변한다. 0.1 에서 0.2 로 부버전이 변해도 하위 호환성을 지키지 않고 배포하는 경우가 많아서 ~0 로 버전범위를 표기하면 하위 호환성을 지키지 못하는 0.2 로 업데이트 되기도 한다

  - 캐럿(^) 을 사용해 ^0.0 으로 표기하면 0.0.0 부터 0.1.0 미만 내에서만 버전을 사용하도록 제한해 하위호환성을 유지할 수 있다

&nbsp;

## 정리

- Nodejs 기술 기반의 프론트엔드 개발환경 구축을 위해 Nodejs 와 NPM 을 설치했다
- `npm init` 명령어를 사용하여 `package.json` 에 정보를 기록하고 프로젝트를 초기화한다
- `npm` 이 제공하는 기본 명령어, 커스텀 명령어 추가방법을 알아보았다
- `npm install` 로 외부 패키지를 다운로드하고, 버전을 관리한다
